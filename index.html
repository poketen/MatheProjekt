<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gruppenprüfung</title>
    <style>
        .hidden {
            display: none;
        }
    </style>
</head>
<body>

<h2>Prüfen ob eine Zahlenmenge eine Gruppe ist</h2>

<form id="groupChecker">
    <label for="menge">Menge (durch Komma-getrennte Zahlen):</label><br>
    <select id="menge" onchange="showInput()" required>
        <option>Z - Ganze Zahlen</option>
        <option>R - Reele Zahlen</option>
        <option value="user">Benutzerdefiniert</option>
    </select>

    <div id="input" class="hidden">
        <input type="text" id="set" placeholder="z.B. 1,2,3,4" required><br>
    </div>
    
    <label for="operation">Verknüpfung:</label><br>
    <select id="operation" onchange="showModuloInput()" required>
        <option value="addition">Addition (+)</option>
        <option value="subtraktion">Subtraktion (-)</option>
        <option value="multiplication">Multiplikation (*)</option>
        <option value="division">Division (/)</option>
        <option value="modulo">Modulo (%)</option>
    </select><br>

    <div id="moduloInput" class="hidden">
        <label for="modulus">Modulus:</label><br>
        <input type="number" id="modulus" placeholder="z.B. 5" min="1"><br>
    </div>

    <button type="button" onclick="checkGroup()">Prüfen</button>
</form>

<div id="result"></div>

<script>
    function showModuloInput() {
        const operation = document.getElementById("operation").value;
        const moduloInputDiv = document.getElementById("moduloInput");

        if (operation === "modulo") {
            moduloInputDiv.classList.remove('hidden');
        } else {
            moduloInputDiv.classList.add('hidden');
        }
    }

    function showInput() {
        const menge = document.getElementById("menge").value;
        const inputDiv = document.getElementById("input");

        if (menge === "user") {
            inputDiv.classList.remove('hidden');
        } else {
            inputDiv.classList.add('hidden');
        }
    }

    function checkGroup() {
        const set = document.getElementById("set").value.split(",").map(Number);
        const operation = document.getElementById("operation").value;
        const mod = document.getElementById("modulus").value;
        const resultElement = document.getElementById("result");

        let neutralesElement = false;
        let inversesElement = false;
        let assoziativ = false;

        if (set.some(isNaN)) {
            resultElement.textContent = "Die Menge G enthält ungültige Werte.";
            return;
        }

        assoziativ = assoziativitätsPrüfung(set, operation, mod); 

        if (operation === "addition") {
            neutralesElement = set.includes(0);
            inversesElement = set.every(a => set.includes(-a));
        } else if (operation === "multiplication") {
            neutralesElement = set.includes(1);
            inversesElement = set.every(a => a !== 0 && set.includes(1 / a));
        } else if (operation === "modulo") {
            if (mod === "" || isNaN(mod) || mod <= 0) {
                resultElement.textContent = "Bitte gib einen gültigen Modulus ein.";
                return;
            }
            const modulus = Number(mod);
            neutralesElement = set.includes(0);
            inversesElement = set.every(a => set.includes((modulus - a) % modulus));
        } else if (operation === "subtraktion") {
            neutralesElement = set.includes(0);
            inversesElement = set.every(a => set.includes(a)); 
        } else if (operation === "division") {
            neutralesElement = set.includes(1);
            inversesElement = set.every(a => a !== 0 && set.includes(1 / a));
        }

   
        if (neutralesElement && inversesElement && assoziativ) {
            resultElement.textContent = "Die Menge bildet eine Gruppe.";
            resultElement.style.color = "green";
        } else {
            resultElement.textContent = "Die Menge bildet keine Gruppe.";
            resultElement.style.color = "red";
        }
    }

//grundlage von https://www.youtube.com/watch?v=GFVrItmzn0o 
// durch die verschachtelte schleife werden alle werte in der Menge durchgegangen und wie im video miteinander einzeln verglichen, wenn etwas nicht stimmt dann wird false zurückgegeben. 

    function assoziativitätsPrüfung(set, operation, mod) {
        const length = set.length;
        for (let i = 0; i < length; i++) {
            for (let j = 0; j < length; j++) {
                for (let k = 0; k < length; k++) {
                    let a = set[i];
                    let b = set[j];
                    let c = set[k];
                    let left, right;

                    if (operation === "addition") {
                        left = a + b + c;
                        right = a + (b + c);
                    } else if (operation === "subtraktion") {
                        left = a - b - c;
                        right = a - (b - c);
                    } else if (operation === "multiplication") {
                        left = a * b * c;
                        right = a * (b * c);
                    } else if (operation === "division") {
                        if (b === 0 || c === 0) continue; // division durch 0 undefiniert
                        left = a / b / c;
                        right = a / (b / c);
                    } else if (operation === "modulo") {
                        if (mod <= 0) continue; // mod muss größer als 0 sein
                        left = ((a + b) % mod + c) % mod;
                        right = (a + (b + c) % mod) % mod;
                    }

                    if (left !== right) {
                        return false; 
                    }
                }
            }
        }
        return true; 
    }
</script>

</body>
</html>